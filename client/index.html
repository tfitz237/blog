<head>
  <title>feBlog</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="client/style.css" type="text/css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div ng-app="app" ng-controller="PostCtrl">
<header class="navbar-fixed">
	<nav class="cyan darken-2">
		<div class="nav-wrapper">
		<ul>
			<li><a href="#" class="left"><i class="material-icons">menu</i></a>
			<li><a href="#" class="brand-title center">feBlog</a>
		</ul>
		</div>
		
	</nav>
</header>
<main>
	<div class="row">
		<div class="col s12 m6 l4" ng-repeat="post in posts">
			<div class="card small cyan lighten-2" ng-if="post.type == 'music'">
				<dropdown id="{{$index}}"></dropdown>
								
					<ul id="post-menu-{{$index}}" class="dropdown-content">
						<li><a href="#" ng-click="editPost(post)">Edit</a></li>
						<li class="divider"></li>
						<li><a href="#" ng-click="deletePost(post)">Delete</a></li>
					</ul>
				<div class="card-image waves-effect waves-block waves-light">
						
			 		<img class="activator responsive-img" src="{{post.embed.thumbnail_url}}">
				</div>
				<div class="card-content activator post-content">
				  	<span class="card-title activator grey-text text-darken-4 music-title">
				  		<div class="row">
				  			<div class="col s11">{{post.embed.title}}</div>
				  			<div class="col s1"><i class="material-icons right">play_circle_filled</i></div>
				  		</div>
				  	</span>
				  	<p>{{post.text|limitTo:120}}<span ng-if="post.text.length > 120">...</span>
				</div>
				<div class="card-reveal cyan darken-4 post-card">
				  	<button class="btn-floating card-title"><i class="material-icons">close</i></span></button>
				  	<div ng-bind-html="embed(post.embed)">
				</div>

				</div>
			  </div>
			<div class="card small cyan lighten-2" ng-if="post.type == 'link'">
				<dropdown id="{{$index}}"></dropdown>
								
					<ul id="post-menu-{{$index}}" class="dropdown-content">
						<li><a href="#" ng-click="editPost(post)">Edit</a></li>
						<li class="divider"></li>
						<li><a href="#" ng-click="deletePost(post)">Delete</a></li>
					</ul>
				<div class="card-image waves-effect waves-block waves-light">
					<button class="btn right link-button" style="z-index:2" href="{{post.embed.url}}">Visit Link</button>	
			 		<img class="activator responsive-img" src="{{post.embed.thumbnail_url}}">
			 		
				</div>
				<div class="card-content post-content">
				  	<span class="card-title grey-text text-darken-4 music-title">
				  		<div class="row">
				  			<div class="col s11">{{post.embed.title}}</div>
				  			<div class="col s1"><i class="material-icons right">play_circle_filled</i></div>
				  		</div>
				  	</span>
				  	<p>{{post.embed.description|limitTo:120}}<span ng-if="post.text.length > 120">...</span>
				</div>
				<div class="card-actions">
					
				</div>


			  </div>
			<div class="card x-small cyan lighten-2" ng-if="post.type == 'text'">
				<dropdown id="{{$index}}"></dropdown>
								
				<ul id="post-menu-{{$index}}" class="dropdown-content">
					<li><a href="#" ng-click="editPost(post)">Edit</a></li>
						<li class="divider"></li>
					<li><a href="#" ng-click="deletePost(post)">Delete</a></li>
				</ul>
				<div class="card-content activator post-content ">
				  	<span class="card-title activator grey-text text-darken-4 music-title">
				  		<div class="row">
				  			<div class="col s11">{{post.title}}</div>
				  			<div class="col s1"><i class="material-icons right">expand_more</i></div>
				  		</div>
				  	</span>
				  	<p>{{post.text|limitTo:300}}<span ng-if="post.text.length > 300">...</span>
				</div>
				<div class="card-reveal grey lighten-2">
				  	<span class="card-title grey-text text-darken-4">{{post.title}}<i class="material-icons right">close</i></span>
				  	<p>{{post.text}}</p>

				</div>
			  </div>
			<div class="card small cyan lighten-2" ng-if="post.type == 'image'">
				<dropdown id="{{$index}}"></dropdown>
								
				<ul id="post-menu-{{$index}}" class="dropdown-content">
					<li><a href="#" ng-click="editPost(post)">Edit</a></li>
						<li class="divider"></li>
					<li><a href="#" ng-click="deletePost(post)">Delete</a></li>
				</ul>
				<div class="card-image waves-effect waves-block waves-light">
			 		<img class="activator" src="{{post.image}}">
				</div>
				<div class="card-content activator post-content">
				  	<span class="card-title activator grey-text text-darken-4 music-title">
				  		<div class="row">
				  			<div class="col s11">{{post.title}}</div>
				  			<div class="col s1"><i class="material-icons right">expand_more</i></div>
				  		</div>
				  	</span>
				  	<p>{{post.text|limitTo:120}}<span ng-if="post.text.length > 120">...</span>
				</div>
				<div class="card-reveal cyan darken-4 post-card">
				  	<button class="btn-floating card-title"><i class="material-icons">close</i></span></button>
				  	<img class="materialboxed" src={{post.image}}>

				</div>
			  </div>
		</div>
	</div>

	  <div class="fixed-action-btn horizontal" style="bottom: 45px; right: 24px;">
	<a class="btn-floating btn-large cyan lighten-2">
	  <i class="large material-icons">mode_edit</i>
	</a>
	<ul>
	  <li><a class="btn-floating cyan darken-4 modal-trigger" href="#modal-text"><i class="material-icons">format_quote</i></a></li>
	  <li><a class="btn-floating cyan darken-3 modal-trigger" href="#modal-link"><i class="material-icons">link</i></a></li>
	  <li><a class="btn-floating cyan darken-2 modal-trigger" href="#modal-music"><i class="material-icons">music_note</i></a></li>
	  <li><a class="btn-floating cyan darken-1 modal-trigger" href="#modal-image"><i class="material-icons">camera_alt</i></a></li>
	</ul>
  </div>


</main>
<footer>
 	<div id="modal-music" class="modal">
		<div class="modal-content">
			<h4>New Music Post</h4>
					<div class="input-field">
						<label for="musicImage">Music url</label>
						<input type="text" id="musicUrl" ng-model="newPost.music.url">
					</div>
			<div class="input-field col s12">
				<textarea id="textarea1" class="materialize-textarea" length="1000" ng-model="newPost.music.text"></textarea>
					<label for="textarea1">Post content</label>
			</div>
		</div>
		<div class="modal-footer">
	  		<button class=" modal-action modal-close waves-effect waves-green btn-flat" ng-click="addPost('music', newPost.music)">Add Post</button>
		</div>
  </div>
 	<div id="modal-link" class="modal">
		<div class="modal-content">
			<h4>New Link Post</h4>
					<div class="input-field">
						<label for="linkImage">Link url</label>
						<input type="text" id="linkUrl" ng-model="newPost.link.url">
					</div>
		</div>
		<div class="modal-footer">
	  		<button class=" modal-action modal-close waves-effect waves-green btn-flat" ng-click="addPost('link', newPost.link)">Add Post</button>
		</div>
  </div>
 	<div id="modal-image" class="modal">
		<div class="modal-content">
			<h4>New Image Post</h4>
			<div class="row">
				<div class="col s12 m6">
	  				<div class="input-field">
						<input type="text" name="" id="imageTitle" ng-model="newPost.image.title">
						<label for="imageTitle">Post Title</label>
	 				</div>
				</div>
				<div class="col s12 m6">
					<div class="input-field">
						<label for="imageImage">Image Url</label>
						<input type="text" id="imageImage" ng-model="newPost.image.image">
					</div>
				</div>
			</div>
			<div class="input-field col s12">
				<textarea id="textarea1" class="materialize-textarea" length="1000" ng-model="newPost.image.text"></textarea>
					<label for="textarea1">Post content</label>
			</div>
		</div>
		<div class="modal-footer">
	  		<button class=" modal-action modal-close waves-effect waves-green btn-flat" ng-click="addPost('image',newPost.image)">Add Post</button>
		</div>
  </div>
  

 	<div id="modal-text" class="modal">
		<div class="modal-content">
			<h4>New Text Post</h4>
	  				<div class="input-field">
						<input type="text" name="" id="imageTitle" ng-model="newPost.text.title">
						<label for="imageTitle">Post Title</label>
	 				</div>
			<div class="input-field col s12">
				<textarea id="textarea1" class="materialize-textarea" length="1000" ng-model="newPost.text.text"></textarea>
					<label for="textarea1">Post content</label>
			</div>
		</div>
		<div class="modal-footer">
	  		<button class=" modal-action modal-close waves-effect waves-green btn-flat" ng-click="addPost('text',newPost.text)">Add Post</button>
		</div>
  </div>
</footer>

<script>
 $(document).ready(function(){
	$('.modal-trigger').leanModal();
	$('.dropdown-button').dropdown();
	$('.materialboxed').materialbox();
  });
  </script>
</div>	
</body>
